<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnimeStream Pro - Complete Anime Website</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- YouTube API -->
    <script src="https://www.youtube.com/iframe_api"></script>
    
    <!-- Firebase (Only Database - No Storage) -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0e1a; color: white; font-family: 'Segoe UI', sans-serif; }
        
        /* Navbar */
        .navbar { background: #141824; padding: 15px 20px; position: sticky; top: 0; z-index: 100; border-bottom: 2px solid #e50914; }
        .logo { color: #ffd700; font-size: 24px; font-weight: bold; cursor: pointer; }
        .nav-btn { background: #e50914; color: white; border: none; padding: 8px 20px; border-radius: 5px; cursor: pointer; }
        
        /* Cards */
        .anime-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; padding: 20px; }
        .anime-card { background: #1e2230; border-radius: 10px; overflow: hidden; cursor: pointer; transition: 0.3s; }
        .anime-card:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(229, 9, 20, 0.3); }
        .anime-card img { width: 100%; height: 220px; object-fit: cover; }
        .anime-card-content { padding: 10px; }
        .anime-title { font-weight: bold; font-size: 14px; margin-bottom: 5px; }
        .anime-meta { display: flex; justify-content: space-between; color: #aaa; font-size: 12px; }
        .rating { color: #ffd700; }
        
        /* Player */
        .player-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: black; z-index: 1000; display: none; flex-direction: column; }
        .player-header { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #111; }
        .close-btn { background: #e50914; border: none; color: white; padding: 8px 20px; border-radius: 5px; cursor: pointer; }
        #youtube-player { width: 100%; height: 100%; }
        .episodes-bar { display: flex; overflow-x: auto; padding: 10px; background: #1a1a1a; gap: 10px; }
        .episode-btn { background: #333; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; white-space: nowrap; }
        .episode-btn.active { background: #e50914; }
        
        /* Admin Panel */
        .admin-container { max-width: 1200px; margin: 20px auto; padding: 0 20px; }
        .admin-section { background: #141824; border-radius: 10px; padding: 20px; margin-bottom: 20px; }
        .admin-title { color: #ffd700; font-size: 20px; margin-bottom: 20px; }
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; margin-bottom: 5px; color: #aaa; }
        .form-input { width: 100%; padding: 10px; background: #1e2230; border: 1px solid #333; color: white; border-radius: 5px; }
        .form-input:focus { outline: none; border-color: #e50914; }
        .form-select { width: 100%; padding: 10px; background: #1e2230; border: 1px solid #333; color: white; border-radius: 5px; }
        .admin-btn { background: #e50914; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; margin-right: 10px; }
        .admin-btn-green { background: #4CAF50; }
        .admin-btn-red { background: #ff4444; }
        .admin-item { background: #1e2230; padding: 15px; margin-bottom: 10px; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; }
        .admin-item-left { display: flex; align-items: center; gap: 15px; }
        .admin-item-left img { width: 50px; height: 50px; border-radius: 5px; object-fit: cover; }
        .episode-item { background: #1e2230; padding: 10px; margin-bottom: 5px; border-radius: 5px; display: flex; justify-content: space-between; align-items: center; }
        
        /* Details Page */
        .details-container { padding: 20px; max-width: 1200px; margin: 0 auto; }
        .details-header { display: flex; gap: 30px; margin-bottom: 30px; background: #141824; padding: 20px; border-radius: 10px; }
        .details-poster { width: 300px; }
        .details-poster img { width: 100%; border-radius: 10px; }
        .details-info { flex: 1; }
        .details-title { font-size: 32px; margin-bottom: 10px; }
        .details-meta { display: flex; gap: 20px; margin: 15px 0; color: #aaa; }
        .details-description { line-height: 1.6; color: #ccc; margin: 20px 0; }
        .watch-btn { background: #e50914; color: white; border: none; padding: 12px 30px; border-radius: 5px; cursor: pointer; font-size: 16px; }
        
        /* Loading */
        .loading-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); display: none; justify-content: center; align-items: center; z-index: 2000; }
        .loading-spinner { width: 50px; height: 50px; border: 5px solid #333; border-top-color: #e50914; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .hide { display: none !important; }
    </style>
</head>

<body>
<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
</div>

<!-- Video Player -->
<div class="player-overlay" id="playerOverlay">
    <div class="player-header">
        <h3 id="playerTitle">Now Playing</h3>
        <button class="close-btn" onclick="closePlayer()">Close</button>
    </div>
    <div id="episodesBar" class="episodes-bar"></div>
    <div id="youtube-player"></div>
</div>

<!-- Navbar -->
<div class="navbar">
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <div class="logo" onclick="showSection('home')">üé¨ AnimeStream Pro</div>
        <div>
            <button class="nav-btn" onclick="showSection('home')">Home</button>
            <button class="nav-btn" onclick="showAdminLogin()" style="background: #4CAF50; margin-left: 10px;">Admin</button>
        </div>
    </div>
</div>

<!-- Main Content -->
<div id="mainContent">
    <!-- Home Section -->
    <div id="homeSection">
        <div style="padding: 20px;">
            <h2 style="font-size: 24px; margin-bottom: 20px;">üî• Trending Anime</h2>
            <div id="trendingGrid" class="anime-grid"></div>
            
            <h2 style="font-size: 24px; margin: 30px 0 20px;">üì∫ All Anime</h2>
            <div id="animeGrid" class="anime-grid"></div>
        </div>
    </div>

    <!-- Anime Details Section -->
    <div id="detailsSection" class="hide">
        <div class="details-container">
            <button onclick="showSection('home')" style="background: none; border: none; color: #ffd700; cursor: pointer; margin-bottom: 20px;">
                <i class="fas fa-arrow-left"></i> Back to Home
            </button>
            <div id="detailsContent"></div>
        </div>
    </div>

    <!-- Admin Login Section -->
    <div id="adminLoginSection" class="hide">
        <div class="admin-container">
            <div class="admin-section" style="max-width: 400px; margin: 50px auto;">
                <h2 class="admin-title">üîê Admin Login</h2>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="adminPassword" class="form-input" placeholder="Enter admin password">
                </div>
                <button class="admin-btn" onclick="checkAdminPassword()">Login</button>
            </div>
        </div>
    </div>

<!-- Admin Panel Section -->
<div id="adminSection" class="hide">
    <div class="admin-container">
        <!-- Admin Header -->
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
            <h2 style="color: #ffd700; font-size: 28px;">üìã Admin Dashboard</h2>
            <button class="admin-btn-red" onclick="logoutAdmin()">Logout</button>
        </div>

        <!-- Add Anime Form -->
        <div class="admin-section">
            <h3 class="admin-title">‚ûï Add New Anime</h3>
            
            <div class="form-group">
                <label class="form-label">Poster Image URL</label>
                <input type="text" id="animePoster" class="form-input" placeholder="https://example.com/image.jpg">
            </div>

            <div class="form-group">
                <label class="form-label">Anime Title</label>
                <input type="text" id="animeTitle" class="form-input" placeholder="e.g., Naruto">
            </div>
            
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea id="animeDesc" class="form-input" rows="3" placeholder="Anime description..."></textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label">Genres (comma separated)</label>
                <input type="text" id="animeGenres" class="form-input" placeholder="e.g., Action, Adventure, Comedy">
            </div>
            
            <div class="form-group">
                <label class="form-label">Release Year</label>
                <input type="number" id="animeYear" class="form-input" placeholder="2024">
            </div>
            
            <div class="form-group">
                <label class="form-label">Rating (1-10)</label>
                <input type="number" id="animeRating" class="form-input" placeholder="8.5" step="0.1" min="0" max="10">
            </div>
            
            <div class="form-group">
                <label class="form-label">Status</label>
                <select id="animeStatus" class="form-select">
                    <option value="ongoing">Ongoing</option>
                    <option value="completed">Completed</option>
                    <option value="upcoming">Upcoming</option>
                </select>
            </div>
            
            <button class="admin-btn" onclick="addAnime()">Add Anime</button>
        </div>

            <!-- Add Episodes Section -->
            <div class="admin-section">
                <h3 class="admin-title">üì∫ Manage Episodes</h3>
                
                <div class="form-group">
                    <label class="form-label">Select Anime</label>
                    <select id="episodeAnimeSelect" class="form-select"></select>
                </div>

                <div class="form-group">
                    <label class="form-label">YouTube Video ID</label>
                    <input type="text" id="episodeYoutubeId" class="form-input" placeholder="e.g., RgKAFK5djSk">
                </div>

                <div class="form-group">
                    <label class="form-label">Episode Number</label>
                    <input type="number" id="episodeNumber" class="form-input" placeholder="1">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Episode Title</label>
                    <input type="text" id="episodeTitle" class="form-input" placeholder="Enter episode title">
                </div>
                
                <button class="admin-btn" onclick="addEpisode()">Add Episode</button>
            </div>

            <!-- Current Anime List -->
            <div class="admin-section">
                <h3 class="admin-title">üìã Current Anime List</h3>
                <div id="adminAnimeList"></div>
            </div>

            <!-- Episodes List -->
            <div class="admin-section">
                <h3 class="admin-title">üìã All Episodes</h3>
                <div id="adminEpisodesList"></div>
            </div>
        </div>
    </div>
</div>

<script>
// ============================================
// üî• FIREBASE CONFIGURATION (NO STORAGE)
// ============================================
firebase.initializeApp({
    apiKey: "AIzaSyD1-qQQK126gMt2XrRffU0W0_ReRxB5sXI",
    authDomain: "anime-ki-duniya-695c4.firebaseapp.com",
    databaseURL: "https://anime-ki-duniya-695c4-default-rtdb.firebaseio.com",
    projectId: "anime-ki-duniya-695c4"
});

const db = firebase.database();
let ytPlayer = null;
let currentAnimeId = null;
let currentEpisodes = [];

// ============================================
// üî• YOUTUBE PLAYER
// ============================================
function onYouTubeIframeAPIReady() {
    console.log('YouTube API Ready');
}

function playVideo(videoId, title, episodes = [], startEp = 1) {
    if (!videoId && episodes.length > 0) {
        videoId = episodes[0]?.videoId;
    }
    
    if (!videoId) {
        alert('No video available!');
        return;
    }

    // Clean YouTube ID (remove any extra parameters)
    videoId = videoId.split('?')[0].split('&')[0];
    
    document.getElementById('playerOverlay').style.display = 'flex';
    document.getElementById('playerTitle').textContent = title || 'Now Playing';
    
    // Episodes bar
    const episodesBar = document.getElementById('episodesBar');
    episodesBar.innerHTML = '';
    if (episodes.length > 0) {
        episodes.forEach((ep, index) => {
            const btn = document.createElement('button');
            btn.className = `episode-btn ${index + 1 === startEp ? 'active' : ''}`;
            btn.textContent = `Ep ${ep.number}`;
            btn.onclick = () => {
                playVideo(ep.videoId, `${title} - Ep ${ep.number}`, episodes, ep.number);
                document.querySelectorAll('.episode-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            };
            episodesBar.appendChild(btn);
        });
    }

    // Destroy old player if exists
    if (ytPlayer) {
        ytPlayer.destroy();
        ytPlayer = null;
    }

    // Clear container
    document.getElementById('youtube-player').innerHTML = '';

    // Create new player with proper config
    setTimeout(() => {
        ytPlayer = new YT.Player('youtube-player', {
            videoId: videoId,
            width: '100%',
            height: '100%',
            playerVars: {
                'autoplay': 1,
                'controls': 1,
                'rel': 0,
                'modestbranding': 1,
                'iv_load_policy': 3,
                'fs': 1,
                'playsinline': 1,
                'origin': window.location.origin
            },
            events: {
                'onReady': (event) => {
                    console.log('Player ready');
                    event.target.playVideo();
                },
                'onError': (event) => {
                    console.error('Player error:', event.data);
                    let errorMsg = 'Video error: ';
                    switch(event.data) {
                        case 2: errorMsg += 'Invalid video ID'; break;
                        case 5: errorMsg += 'HTML5 player error'; break;
                        case 100: errorMsg += 'Video not found or removed'; break;
                        case 101: errorMsg += 'Embedding not allowed by video owner'; break;
                        case 150: errorMsg += 'Embedding not allowed'; break;
                        default: errorMsg += 'Error code ' + event.data;
                    }
                    alert(errorMsg);
                }
            }
        });
    }, 100);
}

function closePlayer() {
    document.getElementById('playerOverlay').style.display = 'none';
    if (ytPlayer) {
        ytPlayer.stopVideo();
    }
}

// ============================================
// üî• LOAD HOME PAGE
// ============================================
function loadHome() {
    showLoading(true);
    
    db.ref('anime').on('value', (snapshot) => {
        const animeGrid = document.getElementById('animeGrid');
        const trendingGrid = document.getElementById('trendingGrid');
        animeGrid.innerHTML = '';
        trendingGrid.innerHTML = '';
        
        snapshot.forEach((child) => {
            const anime = child.val();
            anime.id = child.key;
            
            const card = createAnimeCard(anime);
            animeGrid.appendChild(card.cloneNode(true));
            
            if (anime.rating > 8) {
                trendingGrid.appendChild(card.cloneNode(true));
            }
        });
        
        showLoading(false);
    });
}

function createAnimeCard(anime) {
    const card = document.createElement('div');
    card.className = 'anime-card';
    card.innerHTML = `
        <img src="${anime.poster || 'https://via.placeholder.com/300x450'}" alt="${anime.title}">
        <div class="anime-card-content">
            <div class="anime-title">${anime.title}</div>
            <div class="anime-meta">
                <span>${anime.episodes || 0} eps</span>
                <span class="rating"><i class="fas fa-star"></i> ${anime.rating || '0'}</span>
            </div>
        </div>
    `;
    
    card.onclick = () => showAnimeDetails(anime.id);
    return card;
}

// ============================================
// üî• SHOW ANIME DETAILS
// ============================================
function showAnimeDetails(animeId) {
    showLoading(true);
    currentAnimeId = animeId;
    
    db.ref(`anime/${animeId}`).once('value', async (snap) => {
        const anime = snap.val();
        
        const episodesSnap = await db.ref('episodes').orderByChild('animeId').equalTo(animeId).once('value');
        const episodes = [];
        episodesSnap.forEach(ep => episodes.push(ep.val()));
        
        const genres = anime.genres ? anime.genres.split(',').map(g => g.trim()) : [];
        
        document.getElementById('detailsContent').innerHTML = `
            <div class="details-header">
                <div class="details-poster">
                    <img src="${anime.poster}" alt="${anime.title}">
                </div>
                <div class="details-info">
                    <h1 class="details-title">${anime.title}</h1>
                    <div class="details-meta">
                        <span><i class="far fa-calendar-alt"></i> ${anime.year || 'N/A'}</span>
                        <span><i class="fas fa-star" style="color: #ffd700;"></i> ${anime.rating || '0'}/10</span>
                        <span><i class="fas fa-film"></i> ${anime.status || 'ongoing'}</span>
                    </div>
                    <p class="details-description">${anime.description || 'No description available.'}</p>
                    ${episodes.length > 0 ? 
                        `<button class="watch-btn" onclick="playVideo('${episodes[0].videoId}', '${anime.title} - Ep 1', ${JSON.stringify(episodes)})">
                            <i class="fas fa-play"></i> Watch Now
                        </button>` : 
                        '<p style="color: #666;">No episodes yet</p>'}
                </div>
            </div>
            <h2 style="font-size: 24px; margin: 20px 0;">üì∫ Episodes</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 10px;">
                ${episodes.map(ep => `
                    <div onclick="playVideo('${ep.videoId}', '${anime.title} - Ep ${ep.number}', ${JSON.stringify(episodes)}, ${ep.number})" 
                         style="background: #1e2230; padding: 15px; border-radius: 5px; cursor: pointer;">
                        <div style="color: #ffd700;">Episode ${ep.number}</div>
                        <div>${ep.title || `Episode ${ep.number}`}</div>
                    </div>
                `).join('')}
            </div>
        `;
        
        showSection('details');
        showLoading(false);
    });
}

// ============================================
// üî• ADMIN FUNCTIONS
// ============================================
function showAdminLogin() {
    showSection('adminLogin');
}

function checkAdminPassword() {
    const pwd = document.getElementById('adminPassword').value;
    if (pwd === 'admin123') {
        showSection('admin');
        loadAdminData();
    } else {
        alert('Wrong password!');
    }
}

function logoutAdmin() {
    document.getElementById('adminPassword').value = '';
    showSection('home');
}

function addAnime() {
    showLoading(true);
    
    const title = document.getElementById('animeTitle').value;
    const poster = document.getElementById('animePoster').value;
    const desc = document.getElementById('animeDesc').value;
    const genres = document.getElementById('animeGenres').value;
    const year = document.getElementById('animeYear').value;
    const rating = document.getElementById('animeRating').value;
    const status = document.getElementById('animeStatus').value;

    if (!title || !poster) {
        alert('Title and Poster URL are required!');
        showLoading(false);
        return;
    }

    const animeData = {
        title: title,
        poster: poster,
        description: desc,
        genres: genres,
        year: year || new Date().getFullYear(),
        rating: rating || 5,
        status: status,
        episodes: 0,
        createdAt: Date.now()
    };

    db.ref('anime').push(animeData).then(() => {
        alert('Anime added successfully!');
        document.getElementById('animeTitle').value = '';
        document.getElementById('animePoster').value = '';
        document.getElementById('animeDesc').value = '';
        document.getElementById('animeGenres').value = '';
        document.getElementById('animeYear').value = '';
        document.getElementById('animeRating').value = '';
        loadAdminData();
        showLoading(false);
    }).catch((error) => {
        alert('Error: ' + error.message);
        showLoading(false);
    });
}

function addEpisode() {
    showLoading(true);
    
    const animeId = document.getElementById('episodeAnimeSelect').value;
    const youtubeId = document.getElementById('episodeYoutubeId').value;
    const epNumber = document.getElementById('episodeNumber').value;
    const epTitle = document.getElementById('episodeTitle').value;

    if (!animeId || !epNumber || !youtubeId) {
        alert('Anime, Episode Number and YouTube ID are required!');
        showLoading(false);
        return;
    }

    const episodeData = {
        animeId: animeId,
        number: parseInt(epNumber),
        title: epTitle || `Episode ${epNumber}`,
        videoId: youtubeId,
        createdAt: Date.now()
    };

    db.ref('episodes').push(episodeData).then(() => {
        // Update episode count
        db.ref('episodes').orderByChild('animeId').equalTo(animeId).once('value', (snap) => {
            db.ref(`anime/${animeId}/episodes`).set(snap.numChildren());
        });
        
        alert('Episode added successfully!');
        document.getElementById('episodeYoutubeId').value = '';
        document.getElementById('episodeNumber').value = '';
        document.getElementById('episodeTitle').value = '';
        loadAdminData();
        showLoading(false);
    }).catch((error) => {
        alert('Error: ' + error.message);
        showLoading(false);
    });
}

function deleteAnime(animeId) {
    if (confirm('Are you sure you want to delete this anime? All episodes will also be deleted!')) {
        showLoading(true);
        
        db.ref('episodes').orderByChild('animeId').equalTo(animeId).once('value', (snap) => {
            snap.forEach(child => child.ref.remove());
        });
        
        db.ref(`anime/${animeId}`).remove().then(() => {
            alert('Anime deleted!');
            loadAdminData();
            showLoading(false);
        });
    }
}

function deleteEpisode(episodeId, animeId) {
    if (confirm('Delete this episode?')) {
        showLoading(true);
        
        db.ref(`episodes/${episodeId}`).remove().then(() => {
            db.ref('episodes').orderByChild('animeId').equalTo(animeId).once('value', (snap) => {
                db.ref(`anime/${animeId}/episodes`).set(snap.numChildren());
            });
            alert('Episode deleted!');
            loadAdminData();
            showLoading(false);
        });
    }
}

function loadAdminData() {
    // Load anime for select
    db.ref('anime').on('value', (snap) => {
        const select = document.getElementById('episodeAnimeSelect');
        select.innerHTML = '<option value="">Select Anime</option>';
        
        const adminList = document.getElementById('adminAnimeList');
        adminList.innerHTML = '';
        
        snap.forEach((child) => {
            const anime = child.val();
            const id = child.key;
            
            select.innerHTML += `<option value="${id}">${anime.title}</option>`;
            
            adminList.innerHTML += `
                <div class="admin-item">
                    <div class="admin-item-left">
                        <img src="${anime.poster || 'https://via.placeholder.com/50'}" alt="">
                        <div>
                            <div style="font-weight: bold;">${anime.title}</div>
                            <div style="color: #aaa; font-size: 12px;">${anime.episodes || 0} episodes</div>
                        </div>
                    </div>
                    <div>
                        <button class="admin-btn-red" onclick="deleteAnime('${id}')">Delete</button>
                    </div>
                </div>
            `;
        });
    });

    // Load episodes
    db.ref('episodes').on('value', (snap) => {
        const episodesList = document.getElementById('adminEpisodesList');
        episodesList.innerHTML = '';
        
        snap.forEach((child) => {
            const ep = child.val();
            const id = child.key;
            
            db.ref(`anime/${ep.animeId}/title`).once('value', (titleSnap) => {
                const animeTitle = titleSnap.val() || 'Unknown';
                
                episodesList.innerHTML += `
                    <div class="episode-item">
                        <div>
                            <span style="color: #ffd700;">Ep ${ep.number}</span>
                            <span style="margin-left: 10px;">${ep.title || ''}</span>
                            <span style="color: #666; margin-left: 10px;">${animeTitle}</span>
                        </div>
                        <div>
                            <button class="admin-btn-red" onclick="deleteEpisode('${id}', '${ep.animeId}')">Delete</button>
                        </div>
                    </div>
                `;
            });
        });
    });
}

// ============================================
// üî• UTILITY FUNCTIONS
// ============================================
function showLoading(show) {
    document.getElementById('loadingOverlay').style.display = show ? 'flex' : 'none';
}

function showSection(section) {
    document.getElementById('homeSection').classList.add('hide');
    document.getElementById('detailsSection').classList.add('hide');
    document.getElementById('adminLoginSection').classList.add('hide');
    document.getElementById('adminSection').classList.add('hide');
    
    if (section === 'home') {
        document.getElementById('homeSection').classList.remove('hide');
        loadHome();
    } else if (section === 'details') {
        document.getElementById('detailsSection').classList.remove('hide');
    } else if (section === 'adminLogin') {
        document.getElementById('adminLoginSection').classList.remove('hide');
    } else if (section === 'admin') {
        document.getElementById('adminSection').classList.remove('hide');
    }
}

// ============================================
// üî• INITIALIZATION
// ============================================
window.onload = () => {
    loadHome();
    
    // Add sample data if empty
    db.ref('anime').once('value', (snap) => {
        if (!snap.exists()) {
            const samples = [
                { title: 'Naruto', poster: 'https://cdn.myanimelist.net/images/anime/13/17405.jpg', rating: 8.5, status: 'completed', episodes: 0 },
                { title: 'One Piece', poster: 'https://cdn.myanimelist.net/images/anime/6/73245.jpg', rating: 9.0, status: 'ongoing', episodes: 0 },
                { title: 'Demon Slayer', poster: 'https://cdn.myanimelist.net/images/anime/1286/99889.jpg', rating: 8.7, status: 'ongoing', episodes: 0 }
            ];
            samples.forEach(s => db.ref('anime').push(s));
        }
    });
};
</script>

</body>
</html>
